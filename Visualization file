import matplotlib.pyplot as plt
import pandas as pd

df = pd.read_csv("final_filtered_recipes.csv")

#recepies and health score 

def plot_recipes_vs_health_with_levels(df, recipe_titles):
    """
    Plots recipe titles vs healthiness score and shows healthiness level under each bar.

    Parameters:
    df (pandas.DataFrame): DataFrame containing your recipe data
    recipe_titles (list): List of recipe titles to plot
    """
    # Filter DataFrame to only include selected recipes
    filtered_df = df[df['recipe_title'].isin(recipe_titles)]

    if filtered_df.empty:
        print("No recipes found in DataFrame for plotting.")
        return

    scores = filtered_df['healthiness_score']
    titles = filtered_df['recipe_title']

    # Map healthiness levels
    def health_level(score):
        if score < 50:
            return "Unhealthy"
        elif 50 <= score < 80:
            return "Moderate"
        else:
            return "Healthy"

    levels = [health_level(s) for s in scores]

    plt.figure(figsize=(10, 6))
    bars = plt.bar(titles, scores, color='lightgreen')
    plt.xlabel('Recipe')
    plt.ylabel('Healthiness Score')
    plt.title('Recipes vs Healthiness Score')
    plt.xticks(rotation=45, ha='right')

    # Add healthiness level as text under each bar
    for bar, level in zip(bars, levels):
        plt.text(bar.get_x() + bar.get_width()/2, -5, level, ha='center', va='top', rotation=45, fontsize=9)

    plt.ylim(0, 110)  # add some space for labels below zero
    plt.tight_layout()
    plt.show()


# Recepies and number of steps 

# plot_recipes.py

import matplotlib.pyplot as plt

def plot_recipes_vs_num_steps(df, recipe_titles):
    """
    Plots recipe titles vs number of steps using the 'num_steps' column in the DataFrame.

    Parameters:
    df (pandas.DataFrame): DataFrame containing your recipe data
    recipe_titles (list): List of recipe titles to plot
    """
    # Filter DataFrame to only include selected recipes
    filtered_df = df[df['recipe_title'].isin(recipe_titles)]

    if filtered_df.empty:
        print("No recipes found in DataFrame for plotting.")
        return

    plt.figure(figsize=(10, 6))
    plt.bar(filtered_df['recipe_title'], filtered_df['num_steps'], color='coral')
    plt.xlabel('Recipe')
    plt.ylabel('Number of Steps')
    plt.title('Recipes vs Number of Steps')
    plt.xticks(rotation=45, ha='right')
    plt.tight_layout()
    plt.show()

#recipes and number of ingredients 

def plot_recipes_vs_num_ingredients(df, recipe_titles):
    """
    Plots recipe titles vs number of ingredients using the 'num_ingredients' column in the DataFrame.

    Parameters:
    df (pandas.DataFrame): DataFrame containing your recipe data
    recipe_titles (list): List of recipe titles to plot
    """
    # Filter DataFrame to only include selected recipes
    filtered_df = df[df['recipe_title'].isin(recipe_titles)]

    if filtered_df.empty:
        print("No recipes found in DataFrame for plotting.")
        return

    plt.figure(figsize=(10, 6))
    plt.bar(filtered_df['recipe_title'], filtered_df['num_ingredients'], color='lightblue')
    plt.xlabel('Recipe')
    plt.ylabel('Number of Ingredients')
    plt.title('Recipes vs Number of Ingredients')
    plt.xticks(rotation=45, ha='right')
    plt.tight_layout()
    plt.show()

  
